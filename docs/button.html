<!DOCTYPE html>
<html>
<head>
    
</head>
<body>

<input type="button" id="togglee" style="width:100%; height: 100px; font-size: 30px;" value="Activate Compass" onClick="action();" />

<script>
    var hidden = false;
    function action() {
        hidden = !hidden;
        if(hidden) {
            	document.getElementById('togglee').style.visibility = 'hidden';

		if (typeof DeviceMotionEvent.requestPermission === 'function') {
  			// iOS 13+ so request permission
			DeviceOrientationEvent.requestPermission()
			.then(response => {
  				if (response == 'granted') {
    					window.addEventListener('deviceorientation', (e) => {
      						// do something with e
    					})
  				}
			})
			.catch(console.error)
		} else {
  			// non iOS 13+
		}
        } else {
            // button is hidden so do nothing
        }
    }
</script>
    
</body>
</html>
